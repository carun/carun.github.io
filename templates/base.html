<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="{{ config.description }}">
    <title>{% block title %}{{ config.title }}{% endblock title %}</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Ysabeau+Office:ital,wght@0,400;0,500;0,700;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ get_url(path='style.css') }}">
    <script>document.documentElement.dataset.theme=localStorage.getItem("theme")||"light"</script>
    {% block head %}{% endblock head %}
</head>
<body>
    <header>
        <h1><a href="{{ config.base_url }}">{{ config.title }}</a></h1>
        <nav>
            <a href="{{ config.base_url }}">Home</a>
            <a href="mailto:visionofarun@gmail.com">E-mail</a>
            <a href="https://github.com/carun">GitHub</a>
            <a href="https://linkedin.com/in/carun">LinkedIn</a>
            <a href="{{ get_url(path='atom.xml') }}">RSS</a>
            <button id="theme-toggle"></button>
        </nav>
    </header>
    <script>
        const b = document.getElementById("theme-toggle");
        function setTheme(t) { document.documentElement.dataset.theme = t; localStorage.setItem("theme", t); b.textContent = t === "dark" ? "☀" : "☾"; }
        b.addEventListener("click", () => setTheme(document.documentElement.dataset.theme === "dark" ? "light" : "dark"));
        setTheme(document.documentElement.dataset.theme);
    </script>
    <main>
        {% block content %}{% endblock content %}
    </main>
<script>
document.querySelectorAll("sup.footnote-reference").forEach(function(sup) {
    var link = sup.querySelector("a[href^='#fn-']");
    if (!link) return;
    var fnLi = document.getElementById(link.getAttribute("href").slice(1));
    if (!fnLi) return;
    var clone = fnLi.cloneNode(true);
    clone.querySelectorAll("a[href^='#fr-']").forEach(function(a) { a.remove(); });
    sup.setAttribute("data-footnote", clone.textContent.replace(/\s+/g, " ").trim());
});
</script>
</body>
</html>
